"use strict";(globalThis.webpackChunkzustic_doc=globalThis.webpackChunkzustic_doc||[]).push([[9698],{4818(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>l,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"tutorial-extras/query-getting-started","title":"Getting Started","description":"Step-by-step guide to set up Zustic Query in your React app","source":"@site/docs/tutorial-extras/query-getting-started.md","sourceDirName":"tutorial-extras","slug":"/tutorial-extras/query-getting-started","permalink":"/docs/tutorial-extras/query-getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-extras/query-getting-started.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Getting Started","description":"Step-by-step guide to set up Zustic Query in your React app"},"sidebar":"tutorialSidebar","previous":{"title":"Query API Overview","permalink":"/docs/tutorial-extras/query-overview"},"next":{"title":"Middleware & Plugins","permalink":"/docs/tutorial-extras/query-plugins-middleware"}}');var s=r(4848),i=r(8453);const a={sidebar_position:2,title:"Getting Started",description:"Step-by-step guide to set up Zustic Query in your React app"},d="Getting Started with Zustic Query",o={},c=[{value:"Installation",id:"installation",level:2},{value:"Query Hook Return Values",id:"query-hook-return-values",level:2},{value:"Conditional Queries (skip)",id:"conditional-queries-skip",level:2},{value:"Mutation Hook Return Values",id:"mutation-hook-return-values",level:2}];function u(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"getting-started-with-zustic-query",children:"Getting Started with Zustic Query"})}),"\n",(0,s.jsxs)(n.p,{children:["Zustic Query is a lightweight data-fetching abstraction built on top of Zustand.",(0,s.jsx)(n.br,{}),"\n","It supports:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Queries & Mutations"}),"\n",(0,s.jsx)(n.li,{children:"Caching"}),"\n",(0,s.jsx)(n.li,{children:"Refetching"}),"\n",(0,s.jsx)(n.li,{children:"Middleware"}),"\n",(0,s.jsx)(n.li,{children:"Plugins"}),"\n",(0,s.jsx)(n.li,{children:"Transform hooks"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install zustic\n"})}),"\n",(0,s.jsx)(n.p,{children:"Import from the query subpath:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { createApi } from "zustic/query";\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"step-1-create-your-api",children:"Step 1: Create Your API"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"src/api.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { createApi } from "zustic/query";\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\nexport const api = createApi({\n  // Required: base query handler\n  baseQuery: async (params) => {\n    try {\n      const res = await fetch(\n        `https://jsonplaceholder.typicode.com${params.url}`,\n        {\n          method: params.method || "GET",\n          headers: params.headers,\n          body: params.body ? JSON.stringify(params.body) : undefined,\n        }\n      );\n\n      if (!res.ok) {\n        return { error: `HTTP ${res.status}` };\n      }\n\n      return { data: await res.json() };\n    } catch (error) {\n      return {\n        error:\n          error instanceof Error ? error.message : "Unknown error",\n      };\n    }\n  },\n\n  // Cache duration (default: 30 seconds)\n  clashTimeout: 60 * 1000,\n\n  endpoints: (builder) => ({\n    // Query endpoint\n    getUsers: builder.query({\n      query: () => ({\n        url: "/users",\n        method: "GET",\n      }),\n    }),\n\n    // Query with param\n    getUser: builder.query({\n      query: (id: number) => ({\n        url: `/users/${id}`,\n      }),\n    }),\n\n    // Mutation endpoint\n    createUser: builder.mutation({\n      query: (user: Omit<User, "id">) => ({\n        url: "/users",\n        method: "POST",\n        body: user,\n      }),\n    }),\n  }),\n});\n\nexport const {\n  useGetUsersQuery,\n  useGetUserQuery,\n  useCreateUserMutation,\n} = api;\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"step-2-using-query-hooks",children:"Step 2: Using Query Hooks"}),"\n",(0,s.jsx)(n.p,{children:"Query hooks automatically execute on mount (unless skipped)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useGetUsersQuery } from "./api";\n\nexport function UsersList() {\n  const {\n    data,\n    isLoading,\n    isError,\n    isSuccess,\n    error,\n    reFetch,\n  } = useGetUsersQuery(undefined);\n\n  if (isLoading) return <div>Loading...</div>;\n  if (isError) return <div>Error: {String(error)}</div>;\n\n  return (\n    <div>\n      <button onClick={() => reFetch()}>\n        \ud83d\udd04 Refresh\n      </button>\n\n      <ul>\n        {data?.map((user) => (\n          <li key={user.id}>{user.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"query-hook-return-values",children:"Query Hook Return Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const {\n  data,\n  isLoading,\n  isError,\n  isSuccess,\n  error,\n  reFetch,\n} = useGetUsersQuery(arg, options);\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"data"})}),(0,s.jsx)(n.td,{children:"Returned data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isLoading"})}),(0,s.jsx)(n.td,{children:"True during first request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isError"})}),(0,s.jsx)(n.td,{children:"True if request failed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isSuccess"})}),(0,s.jsx)(n.td,{children:"True if request succeeded"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"error"})}),(0,s.jsx)(n.td,{children:"Error value"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"reFetch"})}),(0,s.jsx)(n.td,{children:"Manually trigger refetch"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"conditional-queries-skip",children:"Conditional Queries (skip)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export function UserProfile({ userId }: { userId?: number }) {\n  const { data } = useGetUserQuery(userId, {\n    skip: !userId,\n  });\n\n  if (!userId) return <div>Select a user</div>;\n\n  return <div>{data?.name}</div>;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"step-3-using-mutation-hooks",children:"Step 3: Using Mutation Hooks"}),"\n",(0,s.jsx)(n.p,{children:"Mutations are manually triggered."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useCreateUserMutation } from "./api";\n\nexport function CreateUserForm() {\n  const [createUser, { isLoading, isError, error }] =\n    useCreateUserMutation();\n\n  const handleSubmit = async (\n    e: React.FormEvent<HTMLFormElement>\n  ) => {\n    e.preventDefault();\n\n    const formData = new FormData(e.currentTarget);\n\n    const result = await createUser({\n      name: formData.get("name"),\n      email: formData.get("email"),\n    });\n\n    if (!result.error) {\n      console.log("Created:", result.data);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input name="name" required />\n      <input name="email" required />\n\n      <button disabled={isLoading}>\n        {isLoading ? "Creating..." : "Create"}\n      </button>\n\n      {isError && <div>{String(error)}</div>}\n    </form>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"mutation-hook-return-values",children:"Mutation Hook Return Values"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const [execute, state] = useCreateUserMutation();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Where ",(0,s.jsx)(n.code,{children:"state"})," contains:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"{\n  data,\n  isLoading,\n  isError,\n  isSuccess,\n  error\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Execute mutation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"await execute(payload);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"refetching-data",children:"Refetching Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const { reFetch } = useGetUsersQuery();\n\n<button onClick={() => reFetch()}>\n  Refresh\n</button>\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"caching",children:"Caching"}),"\n",(0,s.jsx)(n.p,{children:"Zustic Query automatically caches results."}),"\n",(0,s.jsx)(n.p,{children:"Cache duration is controlled by:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"clashTimeout: 60 * 1000\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cached data is reused if arguments match"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"reFetch()"})," forces bypassing cache"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"transform--lifecycle-hooks",children:"Transform & Lifecycle Hooks"}),"\n",(0,s.jsx)(n.p,{children:"Endpoints support advanced features:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'builder.query({\n  query: () => ({ url: "/users" }),\n\n  transformResponse: (data, prev) => {\n    return data;\n  },\n\n  transformError: (error) => {\n    return error;\n  },\n\n  onSuccess: async (data) => {\n    console.log("Success:", data);\n  },\n\n  onError: async (error) => {\n    console.error("Error:", error);\n  },\n  middlewares: [],\n  plugins: [],\n});\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"middleware--plugins",children:"Middleware & Plugins"}),"\n",(0,s.jsx)(n.p,{children:"You can configure global middleware and plugins:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"createApi({\n  baseQuery,\n  middlewares: [],\n  plugins: [],\n  endpoints: (builder) => ({ ... }),\n});\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>d});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);