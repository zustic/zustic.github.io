"use strict";(globalThis.webpackChunkzustic_doc=globalThis.webpackChunkzustic_doc||[]).push([[6991],{9137(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"tutorial-extras/advanced-examples","title":"Advanced Examples","description":"Explore advanced patterns and real-world use cases with Zustic.","source":"@site/docs/tutorial-extras/advanced-examples.md","sourceDirName":"tutorial-extras","slug":"/tutorial-extras/advanced-examples","permalink":"/docs/tutorial-extras/advanced-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-extras/advanced-examples.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Middleware Guide","permalink":"/docs/tutorial-extras/middleware"},"next":{"title":"Best Practices","permalink":"/docs/tutorial-extras/best-practices"}}');var s=t(4848),a=t(8453);const o={sidebar_position:2},i="Advanced Examples",d={},c=[{value:"1. Combining Multiple Stores",id:"1-combining-multiple-stores",level:2},{value:"2. Complex State Updates",id:"2-complex-state-updates",level:2},{value:"3. Computed Values &amp; Derived State",id:"3-computed-values--derived-state",level:2},{value:"4. Next.js Integration",id:"4-nextjs-integration",level:2},{value:"5. React Native Usage",id:"5-react-native-usage",level:2},{value:"6. Async Operations",id:"6-async-operations",level:2},{value:"7. Form Management",id:"7-form-management",level:2},{value:"8. Middleware for Logging",id:"8-middleware-for-logging",level:2},{value:"9. Middleware for Persistence",id:"9-middleware-for-persistence",level:2},{value:"10. Middleware for Validation",id:"10-middleware-for-validation",level:2},{value:"11. Combining Multiple Middleware",id:"11-combining-multiple-middleware",level:2},{value:"12. Using <code>get</code> with Derived State",id:"12-using-get-with-derived-state",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"advanced-examples",children:"Advanced Examples"})}),"\n",(0,s.jsx)(n.p,{children:"Explore advanced patterns and real-world use cases with Zustic."}),"\n",(0,s.jsx)(n.h2,{id:"1-combining-multiple-stores",children:"1. Combining Multiple Stores"}),"\n",(0,s.jsx)(n.p,{children:"Use multiple stores together for better organization:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// stores/userStore.ts\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\ninterface UserStore {\n  user: User | null;\n  setUser: (user: User) => void;\n  clearUser: () => void;\n}\n\nexport const useUserStore = create<UserStore>((set) => ({\n  user: null,\n  setUser: (user) => set({ user }),\n  clearUser: () => set({ user: null }),\n}));\n\n// stores/todosStore.ts\ninterface Todo {\n  id: string;\n  text: string;\n  completed: boolean;\n  userId: string;\n}\n\ninterface TodosStore {\n  todos: Todo[];\n  addTodo: (text: string, userId: string) => void;\n  removeTodo: (id: string) => void;\n  toggleTodo: (id: string) => void;\n  getUserTodos: (userId: string) => Todo[];\n}\n\nexport const useTodosStore = create<TodosStore>((set, get) => ({\n  todos: [],\n  addTodo: (text, userId) =>\n    set((state) => ({\n      todos: [\n        ...state.todos,\n        {\n          id: crypto.randomUUID(),\n          text,\n          completed: false,\n          userId,\n        },\n      ],\n    })),\n  removeTodo: (id) =>\n    set((state) => ({\n      todos: state.todos.filter((t) => t.id !== id),\n    })),\n  toggleTodo: (id) =>\n    set((state) => ({\n      todos: state.todos.map((t) =>\n        t.id === id ? { ...t, completed: !t.completed } : t\n      ),\n    })),\n  getUserTodos: (userId) =>\n    get().todos.filter((t) => t.userId === userId),\n}));\n\n// Component using both stores\nfunction Dashboard() {\n  const user = useUserStore((state) => state.user);\n  const { addTodo, getUserTodos } = useTodosStore();\n  const userTodos = user ? getUserTodos(user.id) : [];\n\n  return (\n    <div>\n      <h1>Welcome, {user?.name}</h1>\n      <div>\n        <h2>Your Todos ({userTodos.length})</h2>\n        {userTodos.map((todo) => (\n          <div key={todo.id}>{todo.text}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-complex-state-updates",children:"2. Complex State Updates"}),"\n",(0,s.jsx)(n.p,{children:"Handle complex state transformations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Product {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n}\n\ninterface ShopStore {\n  cart: Product[];\n  total: number;\n  addToCart: (product: Product) => void;\n  removeFromCart: (id: string) => void;\n  updateQuantity: (id: string, quantity: number) => void;\n  clearCart: () => void;\n  calculateTotal: () => number;\n}\n\nexport const useShopStore = create<ShopStore>((set, get) => ({\n  cart: [],\n  total: 0,\n\n  addToCart: (product) =>\n    set((state) => {\n      const existingItem = state.cart.find((p) => p.id === product.id);\n      let newCart;\n\n      if (existingItem) {\n        newCart = state.cart.map((p) =>\n          p.id === product.id\n            ? { ...p, quantity: p.quantity + product.quantity }\n            : p\n        );\n      } else {\n        newCart = [...state.cart, product];\n      }\n\n      const total = newCart.reduce(\n        (sum, p) => sum + p.price * p.quantity,\n        0\n      );\n\n      return { cart: newCart, total };\n    }),\n\n  removeFromCart: (id) =>\n    set((state) => {\n      const newCart = state.cart.filter((p) => p.id !== id);\n      const total = newCart.reduce(\n        (sum, p) => sum + p.price * p.quantity,\n        0\n      );\n      return { cart: newCart, total };\n    }),\n\n  updateQuantity: (id, quantity) =>\n    set((state) => {\n      const newCart = state.cart.map((p) =>\n        p.id === id ? { ...p, quantity } : p\n      );\n      const total = newCart.reduce(\n        (sum, p) => sum + p.price * p.quantity,\n        0\n      );\n      return { cart: newCart, total };\n    }),\n\n  clearCart: () => set({ cart: [], total: 0 }),\n\n  calculateTotal: () => {\n    const state = get();\n    return state.cart.reduce((sum, p) => sum + p.price * p.quantity, 0);\n  },\n}));\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-computed-values--derived-state",children:"3. Computed Values & Derived State"}),"\n",(0,s.jsx)(n.p,{children:"Calculate derived values from your store state:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface StatsStore {\n  scores: number[];\n  addScore: (score: number) => void;\n  getAverage: () => number;\n  getHighest: () => number;\n  getLowest: () => number;\n  getMedian: () => number;\n}\n\nexport const useStatsStore = create<StatsStore>((set, get) => ({\n  scores: [],\n\n  addScore: (score) =>\n    set((state) => ({\n      scores: [...state.scores, score],\n    })),\n\n  getAverage: () => {\n    const { scores } = get();\n    if (scores.length === 0) return 0;\n    return scores.reduce((a, b) => a + b, 0) / scores.length;\n  },\n\n  getHighest: () => {\n    const { scores } = get();\n    return Math.max(...scores);\n  },\n\n  getLowest: () => {\n    const { scores } = get();\n    return Math.min(...scores);\n  },\n\n  getMedian: () => {\n    const { scores } = get();\n    const sorted = [...scores].sort((a, b) => a - b);\n    const mid = Math.floor(sorted.length / 2);\n    return sorted.length % 2 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;\n  },\n}));\n\nfunction Stats() {\n  const store = useStatsStore();\n  const average = store.getAverage();\n  const highest = store.getHighest();\n\n  return (\n    <div>\n      <p>Average: {average.toFixed(2)}</p>\n      <p>Highest: {highest}</p>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-nextjs-integration",children:"4. Next.js Integration"}),"\n",(0,s.jsx)(n.p,{children:"Using Zustic with Next.js:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// app/store/counterStore.ts\n'use client';\n\nimport { create } from 'zustic';\n\ninterface CounterState {\n  count: number;\n  increment: () => void;\n  decrement: () => void;\n}\n\nexport const useCounterStore = create<CounterState>((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n}));\n\n// app/components/Counter.tsx\n'use client';\n\nimport { useCounterStore } from '@/app/store/counterStore';\n\nexport default function Counter() {\n  const { count, increment, decrement } = useCounterStore();\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={increment}>+</button>\n      <button onClick={decrement}>-</button>\n    </div>\n  );\n}\n\n// app/page.tsx\nimport Counter from './components/Counter';\n\nexport default function Home() {\n  return (\n    <main>\n      <h1>Counter App</h1>\n      <Counter />\n    </main>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"5-react-native-usage",children:"5. React Native Usage"}),"\n",(0,s.jsx)(n.p,{children:"Using Zustic with React Native:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { create } from 'zustic';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\n\ninterface ThemeStore {\n  isDark: boolean;\n  toggleTheme: () => void;\n}\n\nconst useThemeStore = create<ThemeStore>((set) => ({\n  isDark: false,\n  toggleTheme: () =>\n    set((state) => ({ isDark: !state.isDark })),\n}));\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  text: {\n    fontSize: 18,\n    marginBottom: 20,\n  },\n});\n\nfunction App() {\n  const { isDark, toggleTheme } = useThemeStore();\n\n  return (\n    <View\n      style={[\n        styles.container,\n        { backgroundColor: isDark ? '#000' : '#fff' },\n      ]}\n    >\n      <Text\n        style={[\n          styles.text,\n          { color: isDark ? '#fff' : '#000' },\n        ]}\n      >\n        {isDark ? 'Dark Mode' : 'Light Mode'}\n      </Text>\n      <TouchableOpacity onPress={toggleTheme}>\n        <Text style={{ color: isDark ? '#fff' : '#000' }}>\n          Toggle Theme\n        </Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nexport default App;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"6-async-operations",children:"6. Async Operations"}),"\n",(0,s.jsx)(n.p,{children:"Handling async state updates:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\ninterface UserStore {\n  user: User | null;\n  loading: boolean;\n  error: string | null;\n  fetchUser: (id: string) => Promise<void>;\n}\n\nexport const useUserStore = create<UserStore>((set) => ({\n  user: null,\n  loading: false,\n  error: null,\n\n  fetchUser: async (id: string) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await fetch(`/api/users/${id}`);\n      if (!response.ok) throw new Error('Failed to fetch');\n      const user = await response.json();\n      set({ user, loading: false });\n    } catch (error) {\n      set({\n        error: error instanceof Error ? error.message : 'Unknown error',\n        loading: false,\n      });\n    }\n  },\n}));\n\nfunction UserProfile({ userId }: { userId: string }) {\n  const { user, loading, error, fetchUser } = useUserStore();\n\n  React.useEffect(() => {\n    fetchUser(userId);\n  }, [userId, fetchUser]);\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n  if (!user) return <div>No user found</div>;\n\n  return (\n    <div>\n      <h1>{user.name}</h1>\n      <p>{user.email}</p>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"7-form-management",children:"7. Form Management"}),"\n",(0,s.jsx)(n.p,{children:"Complete form handling with Zustic:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface FormState {\n  values: Record<string, string>;\n  errors: Record<string, string>;\n  touched: Record<string, boolean>;\n  setField: (name: string, value: string) => void;\n  setError: (name: string, error: string) => void;\n  setTouched: (name: string) => void;\n  reset: () => void;\n}\n\nconst initialValues = {\n  email: '',\n  password: '',\n  name: '',\n};\n\nexport const useFormStore = create<FormState>((set) => ({\n  values: initialValues,\n  errors: {},\n  touched: {},\n\n  setField: (name, value) =>\n    set((state) => ({\n      values: { ...state.values, [name]: value },\n    })),\n\n  setError: (name, error) =>\n    set((state) => ({\n      errors: { ...state.errors, [name]: error },\n    })),\n\n  setTouched: (name) =>\n    set((state) => ({\n      touched: { ...state.touched, [name]: true },\n    })),\n\n  reset: () =>\n    set({\n      values: initialValues,\n      errors: {},\n      touched: {},\n    }),\n}));\n\nfunction LoginForm() {\n  const { values, errors, touched, setField, setError, setTouched, reset } =\n    useFormStore();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Validate\n    if (!values.email) {\n      setError('email', 'Email is required');\n      return;\n    }\n    if (!values.password) {\n      setError('password', 'Password is required');\n      return;\n    }\n\n    // Submit\n    try {\n      await api.login(values);\n      reset();\n    } catch (error) {\n      setError('form', 'Login failed');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        name=\"email\"\n        value={values.email}\n        onChange={(e) => setField('email', e.target.value)}\n        onBlur={() => setTouched('email')}\n      />\n      {touched.email && errors.email && <span>{errors.email}</span>}\n\n      <input\n        name=\"password\"\n        type=\"password\"\n        value={values.password}\n        onChange={(e) => setField('password', e.target.value)}\n        onBlur={() => setTouched('password')}\n      />\n      {touched.password && errors.password && <span>{errors.password}</span>}\n\n      <button type=\"submit\">Login</button>\n    </form>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"8-middleware-for-logging",children:"8. Middleware for Logging"}),"\n",(0,s.jsx)(n.p,{children:"Add logging middleware to track all state changes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface LogEntry {\n  timestamp: number;\n  action: string;\n  prevState: string;\n  nextState: string;\n}\n\nconst loggerMiddleware = (set, get) => (next) => async (partial) => {\n  const prevState = get();\n  const timestamp = Date.now();\n\n  console.log(' Action:',\n    typeof partial === 'function' ? 'function' : Object.keys(partial)\n  );\n  console.log('\ud83d\udcca Previous state:', prevState);\n\n  await next(partial);\n\n  const nextState = get();\n  console.log(' Updated state:', nextState);\n  console.log('\u23f1\ufe0f Time:', new Date(timestamp).toISOString());\n  console.log('---');\n};\n\nconst useStore = create(\n  (set, get) => ({\n    count: 0,\n    name: '',\n    increment: () => set((state) => ({ count: state.count + 1 })),\n    setName: (name: string) => set({ name }),\n  }),\n  [loggerMiddleware]\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"9-middleware-for-persistence",children:"9. Middleware for Persistence"}),"\n",(0,s.jsx)(n.p,{children:"Save state to localStorage automatically:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const persistMiddleware = (key: string) => (set, get) => (next) => async (partial) => {\n  await next(partial);\n\n  // Save to localStorage after each update\n  const state = get();\n  try {\n    localStorage.setItem(key, JSON.stringify(state));\n    console.log('\ud83d\udcbe State persisted');\n  } catch (error) {\n    console.error('Failed to persist state:', error);\n  }\n};\n\nconst useCounterStore = create(\n  (set, get) => {\n    // Load from localStorage on init\n    const saved = localStorage.getItem('counter-store');\n    const initialState = saved ? JSON.parse(saved) : { count: 0 };\n\n    return {\n      ...initialState,\n      increment: () => set((state) => ({ count: state.count + 1 })),\n      decrement: () => set((state) => ({ count: state.count - 1 })),\n    };\n  },\n  [persistMiddleware('counter-store')]\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"10-middleware-for-validation",children:"10. Middleware for Validation"}),"\n",(0,s.jsx)(n.p,{children:"Validate state before updates:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const validateMiddleware = (set, get) => (next) => async (partial) => {\n  const state = get();\n  const updates = typeof partial === 'function' ? partial(state) : partial;\n\n  // Validate updates\n  if ('age' in updates && updates.age < 0) {\n    console.warn(' Age cannot be negative');\n    return;\n  }\n\n  if ('email' in updates && !updates.email.includes('@')) {\n    console.warn(' Invalid email format');\n    return;\n  }\n\n  // Valid, proceed with update\n  await next(partial);\n  console.log(' Validation passed');\n};\n\nconst useUserStore = create(\n  (set, get) => ({\n    email: 'test@example.com',\n    age: 25,\n    setEmail: (email: string) => set({ email }),\n    setAge: (age: number) => set({ age }),\n  }),\n  [validateMiddleware]\n);\n\n// Usage:\n// useUserStore.setAge(-5); //  Blocked\n// useUserStore.setEmail('invalid'); //  Blocked\n// useUserStore.setAge(30); //  Allowed\n"})}),"\n",(0,s.jsx)(n.h2,{id:"11-combining-multiple-middleware",children:"11. Combining Multiple Middleware"}),"\n",(0,s.jsx)(n.p,{children:"Chain multiple middleware together:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const timeoutMiddleware = (ms: number) => (set, get) => (next) => async (partial) => {\n  const timeout = new Promise((_, reject) =>\n    setTimeout(() => reject(new Error('Update timeout')), ms)\n  );\n\n  try {\n    await Promise.race([next(partial), timeout]);\n  } catch (error) {\n    console.error('\u23f1\ufe0f Update timed out:', error);\n  }\n};\n\nconst debugMiddleware = (set, get) => (next) => async (partial) => {\n  console.log('\ud83d\udc1b Debug: action triggered');\n  await next(partial);\n};\n\nconst useStore = create(\n  (set, get) => ({\n    count: 0,\n    increment: () => set((state) => ({ count: state.count + 1 })),\n  }),\n  [\n    loggerMiddleware,\n    validateMiddleware,\n    persistMiddleware('app-store'),\n    debugMiddleware,\n    timeoutMiddleware(5000),\n  ]\n);\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"12-using-get-with-derived-state",children:["12. Using ",(0,s.jsx)(n.code,{children:"get"})," with Derived State"]}),"\n",(0,s.jsx)(n.p,{children:"Compute values using the current state:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface CartStore {\n  items: { id: string; price: number; quantity: number }[];\n  addItem: (item: any) => void;\n  removeItem: (id: string) => void;\n  getTotal: () => number;\n  getItemCount: () => number;\n  getSummary: () => string;\n}\n\nconst useCartStore = create<CartStore>((set, get) => ({\n  items: [],\n\n  addItem: (item) =>\n    set((state) => ({\n      items: [...state.items, item],\n    })),\n\n  removeItem: (id) =>\n    set((state) => ({\n      items: state.items.filter((item) => item.id !== id),\n    })),\n\n  // Compute total price\n  getTotal: () => {\n    const state = get();\n    return state.items.reduce(\n      (sum, item) => sum + item.price * item.quantity,\n      0\n    );\n  },\n\n  // Compute item count\n  getItemCount: () => {\n    const state = get();\n    return state.items.reduce((sum, item) => sum + item.quantity, 0);\n  },\n\n  // Get formatted summary\n  getSummary: () => {\n    const state = get();\n    const total = state.items.reduce(\n      (sum, item) => sum + item.price * item.quantity,\n      0\n    );\n    const count = state.items.reduce((sum, item) => sum + item.quantity, 0);\n    return `${count} items - $${total.toFixed(2)}`;\n  },\n}));\n\n// Usage:\nfunction CartSummary() {\n  const store = useCartStore();\n  return <div>{store.getSummary()}</div>;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"These examples showcase the flexibility and power of Zustic for managing various types of application state. Pick the patterns that fit your use case!"})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>i});var r=t(6540);const s={},a=r.createContext(s);function o(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);