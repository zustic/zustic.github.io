"use strict";(globalThis.webpackChunkzustic_doc=globalThis.webpackChunkzustic_doc||[]).push([[9698],{4818(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"tutorial-extras/query-getting-started","title":"Getting Started","description":"Build your first data-fetching layer with Zustic Query","source":"@site/docs/tutorial-extras/query-getting-started.md","sourceDirName":"tutorial-extras","slug":"/tutorial-extras/query-getting-started","permalink":"/docs/tutorial-extras/query-getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-extras/query-getting-started.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Getting Started","description":"Build your first data-fetching layer with Zustic Query"},"sidebar":"tutorialSidebar","previous":{"title":"Query API Overview","permalink":"/docs/tutorial-extras/query-overview"},"next":{"title":"Middleware","permalink":"/docs/tutorial-extras/query-middleware"}}');var s=r(4848),i=r(8453);const a={sidebar_position:2,title:"Getting Started",description:"Build your first data-fetching layer with Zustic Query"},o="Getting Started with Zustic Query",d={},l=[{value:"Features Overview",id:"features-overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Step 1: Define Your API Configuration",id:"step-1-define-your-api-configuration",level:2},{value:"Step 2: Using Query Hooks",id:"step-2-using-query-hooks",level:2},{value:"Fetching List Data",id:"fetching-list-data",level:3},{value:"Query Hook Return Values",id:"query-hook-return-values",level:2},{value:"Conditional Queries",id:"conditional-queries",level:2},{value:"Skip Until Data Available",id:"skip-until-data-available",level:3},{value:"Step 3: Using Mutation Hooks",id:"step-3-using-mutation-hooks",level:2},{value:"Creating Resources",id:"creating-resources",level:3},{value:"Mutation Hook Return Values",id:"mutation-hook-return-values",level:2},{value:"Manual Refetching",id:"manual-refetching",level:2},{value:"Automatic Caching",id:"automatic-caching",level:2},{value:"Advanced Endpoint Configuration",id:"advanced-endpoint-configuration",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"getting-started-with-zustic-query",children:"Getting Started with Zustic Query"})}),"\n",(0,s.jsx)(n.p,{children:"Set up Zustic Query in minutes and start building robust server state management. This guide walks through installing, configuring, and using the Query API in your React application."}),"\n",(0,s.jsx)(n.h2,{id:"features-overview",children:"Features Overview"}),"\n",(0,s.jsx)(n.p,{children:"Zustic Query provides everything needed for modern data fetching:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Queries & Mutations"})," \u2014 Read and write operations with built-in state management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Intelligent Caching"})," \u2014 Automatic cache management with configurable expiration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Manual Refetching"})," \u2014 Force fresh data when needed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Middleware Pipeline"})," \u2014 Intercept and transform requests/responses"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plugin System"})," \u2014 Extend functionality with lifecycle hooks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Response Transformation"})," \u2014 Normalize API responses to app formats"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"Install the Zustic package:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install zustic\n"})}),"\n",(0,s.jsx)(n.p,{children:"Import the API factory from the query submodule:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { createApi } from 'zustic/query'\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"step-1-define-your-api-configuration",children:"Step 1: Define Your API Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"src/api.ts"})," to centralize your server state management:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { createApi } from "zustic/query";\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\nexport const api = createApi({\n  // Required: base query handler\n  baseQuery: async (params) => {\n    try {\n      const res = await fetch(\n        `https://jsonplaceholder.typicode.com${params.url}`,\n        {\n          method: params.method || "GET",\n          headers: params.headers,\n          body: params.body ? JSON.stringify(params.body) : undefined,\n        }\n      );\n\n      if (!res.ok) {\n        return { error: `HTTP ${res.status}` };\n      }\n\n      return { data: await res.json() };\n    } catch (error) {\n      return {\n        error:\n          error instanceof Error ? error.message : "Unknown error",\n      };\n    }\n  },\n\n  // Cache duration (default: 30 seconds)\n  cacheTimeout: 60 * 1000,\n\n  endpoints: (builder) => ({\n    // Query endpoint\n    getUsers: builder.query({\n      query: () => ({\n        url: "/users",\n        method: "GET",\n      }),\n    }),\n\n    // Query with param\n    getUser: builder.query({\n      query: (id: number) => ({\n        url: `/users/${id}`,\n      }),\n    }),\n\n    // Mutation endpoint\n    createUser: builder.mutation({\n      query: (user: Omit<User, "id">) => ({\n        url: "/users",\n        method: "POST",\n        body: user,\n      }),\n    }),\n  }),\n});\n\nexport const {\n  useGetUsersQuery,\n  useGetUserQuery,\n  useCreateUserMutation,\n} = api;\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"step-2-using-query-hooks",children:"Step 2: Using Query Hooks"}),"\n",(0,s.jsxs)(n.p,{children:["Query hooks automatically fetch data when components mount (unless explicitly skipped). Auto-generated hook names follow the pattern ",(0,s.jsx)(n.code,{children:"use{EndpointName}Query"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"fetching-list-data",children:"Fetching List Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useGetUsersQuery } from "./api";\n\nexport function UsersList() {\n  const {\n    data,\n    isLoading,\n    isError,\n    isSuccess,\n    error,\n    reFetch,\n  } = useGetUsersQuery(undefined);\n\n  if (isLoading) return <div>Loading...</div>;\n  if (isError) return <div>Error: {String(error)}</div>;\n\n  return (\n    <div>\n      <button onClick={() => reFetch()}>\n         Refresh\n      </button>\n\n      <ul>\n        {data?.map((user) => (\n          <li key={user.id}>{user.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"query-hook-return-values",children:"Query Hook Return Values"}),"\n",(0,s.jsx)(n.p,{children:"Every query hook returns a state object with the following properties:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const {\n  data,\n  isLoading,\n  isError,\n  isSuccess,\n  error,\n  reFetch,\n} = useGetUsersQuery(arg, options)\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"data"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"T"})}),(0,s.jsx)(n.td,{children:"The resolved response data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isLoading"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"True during the initial request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isError"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"True if the request failed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"isSuccess"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"True if the request completed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"error"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string?"})}),(0,s.jsx)(n.td,{children:"Error message if request failed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"reFetch"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"() => void"})}),(0,s.jsx)(n.td,{children:"Function to manually trigger fresh data"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"conditional-queries",children:"Conditional Queries"}),"\n",(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"skip"})," option to prevent queries from executing until specific conditions are met."]}),"\n",(0,s.jsx)(n.h3,{id:"skip-until-data-available",children:"Skip Until Data Available"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export function UserProfile({ userId }: { userId?: number }) {\n  // Query only executes if userId is defined\n  const { data } = useGetUserQuery(userId, {\n    skip: !userId,\n  })\n\n  if (!userId) return <div>Select a user first</div>\n\n  return <div>{data?.name}</div>\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"step-3-using-mutation-hooks",children:"Step 3: Using Mutation Hooks"}),"\n",(0,s.jsx)(n.p,{children:"Mutations represent write operations (POST, PUT, DELETE) that are manually triggered on demand."}),"\n",(0,s.jsx)(n.h3,{id:"creating-resources",children:"Creating Resources"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { useCreateUserMutation } from "./api";\n\nexport function CreateUserForm() {\n  const [createUser, { isLoading, isError, error }] =\n    useCreateUserMutation();\n\n  const handleSubmit = async (\n    e: React.FormEvent<HTMLFormElement>\n  ) => {\n    e.preventDefault();\n\n    const formData = new FormData(e.currentTarget);\n\n    const result = await createUser({\n      name: formData.get("name"),\n      email: formData.get("email"),\n    });\n\n    if (!result.error) {\n      console.log("Created:", result.data);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input name="name" required />\n      <input name="email" required />\n\n      <button disabled={isLoading}>\n        {isLoading ? "Creating..." : "Create"}\n      </button>\n\n      {isError && <div>{String(error)}</div>}\n    </form>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"mutation-hook-return-values",children:"Mutation Hook Return Values"}),"\n",(0,s.jsx)(n.p,{children:"Mutation hooks return a tuple with the execution function and state object:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"{\n  data,\n  isLoading,\n  isError,\n  isSuccess,\n  error\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Mutation execution:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Call with payload\nconst result = await execute(payload)\n\n// Handle result\nif (result.error) {\n  console.error('Operation failed:', result.error)\n} else {\n  console.log('Success:', result.data)\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"manual-refetching",children:"Manual Refetching"}),"\n",(0,s.jsxs)(n.p,{children:["Force queries to fetch fresh data by calling ",(0,s.jsx)(n.code,{children:"reFetch()"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export function UsersList() {\n  const { data, reFetch } = useGetUsersQuery()\n\n  return (\n    <div>\n      <button onClick={() => reFetch()}>\n         Refresh Data\n      </button>\n      {/* Display users */}\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"automatic-caching",children:"Automatic Caching"}),"\n",(0,s.jsx)(n.p,{children:"Zustic Query automatically manages data freshness through intelligent caching:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const api = createApi({\n  baseQuery: myBaseQuery,\n  cacheTimeout: 60 * 1000,  // Cache for 60 seconds\n  endpoints: (builder) => (/* ... */)\n})\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cache Behavior:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cached data reused if arguments match and cache hasn't expired"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"reFetch()"})," always fetches fresh regardless of cache"]}),"\n",(0,s.jsx)(n.li,{children:"Different arguments trigger separate cache entries"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"advanced-endpoint-configuration",children:"Advanced Endpoint Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Endpoints support lifecycle hooks and transformation functions for advanced scenarios:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"builder.query({\n  query: () => ({ url: '/users' }),\n\n  // Transform successful responses\n  transformResponse: (data, meta) => {\n    return data\n  },\n\n  // Transform error messages\n  transformError: (error, meta) => {\n    return error\n  },\n\n  // React to successful operations\n  onSuccess: async (data) => {\n    console.log('Success:', data)\n  },\n\n  // React to failures\n  onError: async (error) => {\n    console.error('Error:', error)\n  },\n\n  middlewares: [],\n  plugins: [],\n})\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"middleware--plugins",children:"Middleware & Plugins"}),"\n",(0,s.jsx)(n.p,{children:"You can configure global middleware and plugins:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"createApi({\n  baseQuery,\n  middlewares: [],\n  plugins: [],\n  endpoints: (builder) => ({ ... }),\n});\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);