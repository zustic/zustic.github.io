"use strict";(globalThis.webpackChunkzustic_doc=globalThis.webpackChunkzustic_doc||[]).push([[1368],{8331(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tutorial-extras/query-overview","title":"Query API Overview","description":"Lightweight server state management built on Zustic Core","source":"@site/docs/tutorial-extras/query-overview.md","sourceDirName":"tutorial-extras","slug":"/tutorial-extras/query-overview","permalink":"/docs/tutorial-extras/query-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-extras/query-overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Query API Overview","description":"Lightweight server state management built on Zustic Core"},"sidebar":"tutorialSidebar","previous":{"title":"Best Practices","permalink":"/docs/tutorial-extras/best-practices"},"next":{"title":"Getting Started","permalink":"/docs/tutorial-extras/query-getting-started"}}');var s=n(4848),r=n(8453);const l={sidebar_position:1,title:"Query API Overview",description:"Lightweight server state management built on Zustic Core"},c="Query API Overview",d={},o=[{value:"Core Concepts",id:"core-concepts",level:2},{value:"Main Building Blocks",id:"main-building-blocks",level:3},{value:"Basic Example",id:"basic-example",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Key Capabilities",id:"key-capabilities",level:2},{value:"Cache Lifecycle",id:"cache-lifecycle",level:2},{value:"Comparison with Alternatives",id:"comparison-with-alternatives",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"query-api-overview",children:"Query API Overview"})}),"\n",(0,s.jsx)(t.p,{children:"Zustic Query is a minimal yet powerful server state management library. Built on top of Zustic Core, it provides automatic caching, middleware pipelines, and plugin hooks for complete control over your data-fetching layer."}),"\n",(0,s.jsx)(t.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,s.jsx)(t.h3,{id:"main-building-blocks",children:"Main Building Blocks"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"createApi"})})," \u2014 Factory function that creates your API configuration with endpoints and middleware"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"baseQuery"})})," \u2014 Custom async handler for all HTTP requests (fetch, axios, etc.)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"endpoints"})})," \u2014 Builder pattern for declaring query and mutation operations"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"cacheTimeout"})})," \u2014 Cache expiration window in milliseconds (default: 30 seconds)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Middleware"})," \u2014 Request/response transformation pipeline executed sequentially"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Plugins"})," \u2014 Lifecycle hooks (beforeQuery, afterQuery, onError) for side effects"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"basic-example",children:"Basic Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"Here's how the pieces fit together:\nimport { createApi } from 'zustic/query'\n\nconst api = createApi({\n  // 1. Custom fetch function\n  baseQuery: async (params) => {\n    const res = await fetch(params.url, {\n      method: params.method || 'GET',\n      headers: params.headers,\n      body: params.body ? JSON.stringify(params.body) : undefined\n    })\n    return { data: await res.json() }\n  },\n\n  // 2. Cache duration\n  cacheTimeout: 5 * 60 * 1000,\n\n  // 3. Define endpoints\n  endpoints: (builder) => ({\n    getUsers: builder.query({\n      query: () => ({ url: '/users', method: 'GET' })\n    }),\n\n    createUser: builder.mutation({\n      query: (user) => ({ url: '/users', method: 'POST', body: user })\n    })\n  })\n})\n\n// 4. Auto-generated hooks\nexport const { useGetUsersQuery, useCreateUserMutation } = api\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsx)(t.p,{children:"Zustic Query follows a declarative pattern where you define your API once, and everything else is generated:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Configuration"})," \u2014 Define ",(0,s.jsx)(t.code,{children:"baseQuery"}),", ",(0,s.jsx)(t.code,{children:"cacheTimeout"}),", and ",(0,s.jsx)(t.code,{children:"endpoints"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Auto-Generation"})," \u2014 Hooks are automatically created from endpoints"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Execution"})," \u2014 Hooks manage state, caching, and request lifecycle"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Flexibility"})," \u2014 Middleware and plugins customize behavior globally or per-endpoint"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"key-capabilities",children:"Key Capabilities"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Auto-Generated Hooks"})," \u2014 Queries become ",(0,s.jsx)(t.code,{children:"use{Name}Query"}),", mutations become ",(0,s.jsx)(t.code,{children:"use{Name}Mutation"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Intelligent Caching"})," \u2014 Automatic request deduplication with time-based expiration"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Middleware Pipeline"})," \u2014 Global or endpoint-specific request/response transformation"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Plugin System"})," \u2014 Lifecycle hooks for logging, analytics, error recovery"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Type-Safe"})," \u2014 Full TypeScript support with complete type inference"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"State Tracking"})," \u2014 Built-in ",(0,s.jsx)(t.code,{children:"isLoading"}),", ",(0,s.jsx)(t.code,{children:"isError"}),", ",(0,s.jsx)(t.code,{children:"isSuccess"})," states"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"cache-lifecycle",children:"Cache Lifecycle"}),"\n",(0,s.jsx)(t.p,{children:"Zustic Query's caching system optimizes performance by reducing redundant requests:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Stage 1 \u2014 First Request"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Executes ",(0,s.jsx)(t.code,{children:"baseQuery"})," function"]}),"\n",(0,s.jsx)(t.li,{children:"Stores result with expiration timer"}),"\n",(0,s.jsx)(t.li,{children:"Returns data to component"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Stage 2 \u2014 Subsequent Requests"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Checks if cache exists and hasn't expired"}),"\n",(0,s.jsx)(t.li,{children:"Returns cached data instantly (zero network latency)"}),"\n",(0,s.jsxs)(t.li,{children:["No ",(0,s.jsx)(t.code,{children:"baseQuery"})," execution"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Stage 3 \u2014 Expired Cache"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Automatically fetches fresh data when timeout expires"}),"\n",(0,s.jsx)(t.li,{children:"Updates cache with new response"}),"\n",(0,s.jsx)(t.li,{children:"Triggers component re-render"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Stage 4 \u2014 Manual Refetch"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Calling ",(0,s.jsx)(t.code,{children:"reFetch()"})," skips cache entirely"]}),"\n",(0,s.jsxs)(t.li,{children:["Immediately executes ",(0,s.jsx)(t.code,{children:"baseQuery"})]}),"\n",(0,s.jsx)(t.li,{children:"Always returns fresh data"}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"comparison-with-alternatives",children:"Comparison with Alternatives"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Feature"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Zustic Query"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"TanStack Query"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"RTK Query"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"SWR"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Apollo Client"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Bundle Size"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Tiny"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Medium"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Large"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Small"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Very Large"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Custom Fetch"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Full"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Limited"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Redux"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Hooks"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"GraphQL"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Auto Hooks"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Middleware"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Links"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Plugins"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Limited"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Learning Curve"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Low"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Medium"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"High"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Low"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"High"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"TypeScript"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Excellent"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Excellent"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Good"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Fair"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Fair"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Zero Config"})}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"No"})]})]})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"next-steps",children:"Next Steps"})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,t,n){n.d(t,{R:()=>l,x:()=>c});var i=n(6540);const s={},r=i.createContext(s);function l(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);