"use strict";(globalThis.webpackChunkzustic_doc=globalThis.webpackChunkzustic_doc||[]).push([[1368],{8331(e,r,s){s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"tutorial-extras/query-overview","title":"Query API Overview","description":"Lightweight server state management for Zustic","source":"@site/docs/tutorial-extras/query-overview.md","sourceDirName":"tutorial-extras","slug":"/tutorial-extras/query-overview","permalink":"/docs/tutorial-extras/query-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-extras/query-overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Query API Overview","description":"Lightweight server state management for Zustic"},"sidebar":"tutorialSidebar","previous":{"title":"Best Practices","permalink":"/docs/tutorial-extras/best-practices"},"next":{"title":"Getting Started","permalink":"/docs/tutorial-extras/query-getting-started"}}');var n=s(4848),i=s(8453);const d={sidebar_position:1,title:"Query API Overview",description:"Lightweight server state management for Zustic"},c="Query API Overview",l={},a=[{value:"Core Architecture",id:"core-architecture",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Caching Flow",id:"caching-flow",level:2}];function o(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"query-api-overview",children:"Query API Overview"})}),"\n",(0,n.jsx)(r.p,{children:"Zustic Query is a lightweight server state management library built on Zustic Core. It manages server state with automatic caching, middleware support, and plugin hooks."}),"\n",(0,n.jsx)(r.h2,{id:"core-architecture",children:"Core Architecture"}),"\n",(0,n.jsx)(r.p,{children:"Based on your implementation:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"createApi"})}),": Main factory function that creates your API instance"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"baseQuery"})}),": Custom async function that handles all network requests"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"endpoints"})}),": Builder pattern for defining queries and mutations"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:(0,n.jsx)(r.code,{children:"clashTimeout"})}),": Cache expiration time in milliseconds (default: 30 seconds)"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Middleware"}),": Pipeline for request/response transformation"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Plugins"}),": Lifecycle hooks (beforeQuery, afterQuery, onError)"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-typescript",children:"import { createApi } from 'zustic/query'\n\nconst api = createApi({\n  // 1. Custom fetch function\n  baseQuery: async (params) => {\n    const res = await fetch(params.url, {\n      method: params.method || 'GET',\n      headers: params.headers,\n      body: params.body ? JSON.stringify(params.body) : undefined\n    })\n    return { data: await res.json() }\n  },\n\n  // 2. Cache duration\n  clashTimeout: 5 * 60 * 1000,\n\n  // 3. Define endpoints\n  endpoints: (builder) => ({\n    getUsers: builder.query({\n      query: () => ({ url: '/users', method: 'GET' })\n    }),\n\n    createUser: builder.mutation({\n      query: (user) => ({ url: '/users', method: 'POST', body: user })\n    })\n  })\n})\n\n// 4. Auto-generated hooks\nexport const { useGetUsersQuery, useCreateUserMutation } = api\n"})}),"\n",(0,n.jsx)(r.h2,{id:"key-features",children:"Key Features"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Auto-Generated Hooks"}),": Queries become ",(0,n.jsx)(r.code,{children:"use{Name}Query"}),", mutations become ",(0,n.jsx)(r.code,{children:"use{Name}Mutation"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Smart Caching"}),": Check cache before network request, use ",(0,n.jsx)(r.code,{children:"reFetch()"})," to bypass"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Middleware"}),": Transform requests/responses in pipeline"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Plugins"}),": Hook into query lifecycle events"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Type-Safe"}),": Full TypeScript support with generics"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"State Management"}),": Tracks loading, error, success states"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"caching-flow",children:"Caching Flow"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"First Call"}),": Executes baseQuery, stores data in cache with expiration"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Cached Calls"}),": Returns cached data instantly if not expired"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Expired Cache"}),": Fetches fresh data when cache expires"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Manual Refetch"}),": Call ",(0,n.jsx)(r.code,{children:"reFetch()"})," to bypass cache immediately"]}),"\n"]}),"\n",(0,n.jsx)(r.h1,{id:"real-world-comparison",children:"Real-World Comparison"}),"\n",(0,n.jsx)(r.p,{children:"Below is a practical comparison with major server-state libraries."}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Feature"}),(0,n.jsx)(r.th,{children:"Zustic Query"}),(0,n.jsx)(r.th,{children:"TanStack Query"}),(0,n.jsx)(r.th,{children:"RTK Query"}),(0,n.jsx)(r.th,{children:"SWR"}),(0,n.jsx)(r.th,{children:"Apollo Client"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Bundle Size"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Very Small"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Medium"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Medium"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Small"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 Large"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Custom Fetch Control"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Full Control"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Abstracted"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Redux-based"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Limited"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 GraphQL-only"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Auto Hook Generation"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Built-in Cache"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Advanced"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Advanced"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Advanced"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Middleware System"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Links"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Plugin Lifecycle"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Limited"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Global Interceptors"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Via QueryClient"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 No"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Redux Required"}),(0,n.jsx)(r.td,{children:"\u274c No"}),(0,n.jsx)(r.td,{children:"\u274c No"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Yes"}),(0,n.jsx)(r.td,{children:"\u274c No"}),(0,n.jsx)(r.td,{children:"\u274c No"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"GraphQL Support"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Manual"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Manual"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Manual"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Manual"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Native"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Learning Curve"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Low"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe1 Medium"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 High"}),(0,n.jsx)(r.td,{children:"\ud83d\udfe2 Low"}),(0,n.jsx)(r.td,{children:"\ud83d\udd34 High"})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453(e,r,s){s.d(r,{R:()=>d,x:()=>c});var t=s(6540);const n={},i=t.createContext(n);function d(e){const r=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);